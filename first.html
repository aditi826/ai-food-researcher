<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FreshKeeper AI - Smart Food Management System</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            color: white;
        }

        .header h1 {
            font-size: 3.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        /* Navigation and other existing styles */
        .nav-tabs {
            display: flex;
            justify-content: center;
            background: white;
            border-radius: 15px;
            padding: 8px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin-bottom: 30px;
            width: fit-content;
            margin-left: auto;
            margin-right: auto;
            flex-wrap: wrap;
        }

        .nav-tab {
            padding: 15px 30px;
            border: none;
            background: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1rem;
            white-space: nowrap;
        }

        .nav-tab.active {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
            transform: translateY(-2px);
        }

        .nav-tab:not(.active) {
            color: #7f8c8d;
        }

        .nav-tab:not(.active):hover {
            background: #f8f9fa;
            transform: translateY(-1px);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.4s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Advanced AI Recognition System Styles */
        .ai-recognition-container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.98);
            border-radius: 24px;
            padding: 40px;
            box-shadow: 0 30px 80px rgba(0, 0, 0, 0.15);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .ai-status {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
            padding: 15px;
            background: linear-gradient(135deg, #00c851, #00ff70);
            border-radius: 15px;
            color: white;
            font-weight: 600;
        }

        .pulse {
            width: 12px;
            height: 12px;
            background: #fff;
            border-radius: 50%;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.5; transform: scale(1.2); }
        }

        .input-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }

        .input-panel {
            background: linear-gradient(135deg, #f8f9ff 0%, #e8ecff 100%);
            padding: 30px;
            border-radius: 20px;
            border: 2px solid transparent;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .input-panel::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            transition: left 0.5s;
        }

        .input-panel:hover::before {
            left: 100%;
        }

        .input-panel:hover {
            transform: translateY(-8px);
            border-color: #667eea;
            box-shadow: 0 25px 50px rgba(102, 126, 234, 0.2);
        }

        .panel-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 25px;
        }

        .panel-icon {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
        }

        .panel-title {
            font-size: 1.4rem;
            font-weight: 700;
            color: #333;
        }

        .panel-subtitle {
            font-size: 0.9rem;
            color: #666;
            margin-top: 5px;
        }

        .input-field {
            width: 100%;
            padding: 16px 20px;
            border: 2px solid #e0e8ff;
            border-radius: 12px;
            font-size: 16px;
            margin-bottom: 20px;
            transition: all 0.3s ease;
            background: white;
            font-family: inherit;
        }

        .input-field:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.1);
            transform: translateY(-2px);
        }

        .file-upload-area {
            border: 3px dashed #667eea;
            border-radius: 15px;
            padding: 40px 20px;
            text-align: center;
            background: rgba(102, 126, 234, 0.05);
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
        }

        .file-upload-area:hover {
            border-color: #764ba2;
            background: rgba(118, 75, 162, 0.1);
            transform: scale(1.02);
        }

        .file-upload-area.dragover {
            border-color: #00c851;
            background: rgba(0, 200, 81, 0.1);
        }

        .upload-icon {
            font-size: 3rem;
            color: #667eea;
            margin-bottom: 15px;
        }

        .action-btn {
            width: 100%;
            padding: 16px 24px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .action-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 35px rgba(102, 126, 234, 0.4);
        }

        .action-btn:active {
            transform: translateY(-1px);
        }

        .action-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .ai-analysis {
            background: linear-gradient(135deg, #fff 0%, #f8f9ff 100%);
            border-radius: 20px;
            padding: 40px;
            margin: 30px 0;
            border: 2px solid #e8ecff;
            display: none;
        }

        .ai-analysis.active {
            display: block;
            animation: slideInUp 0.6s ease;
        }

        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .analysis-header {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #e8ecff;
        }

        .analysis-icon {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 28px;
        }

        .product-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin: 30px 0;
        }

        .detail-card {
            background: white;
            padding: 25px;
            border-radius: 16px;
            border: 1px solid #e8ecff;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
            transition: all 0.3s ease;
        }

        .detail-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.12);
        }

        .card-title {
            font-size: 1.2rem;
            font-weight: 700;
            color: #333;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .nutrition-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
        }

        .nutrition-item {
            text-align: center;
            padding: 20px 15px;
            background: linear-gradient(135deg, #f8f9ff, #e8ecff);
            border-radius: 12px;
            border: 1px solid #e0e8ff;
            transition: all 0.3s ease;
        }

        .nutrition-item:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.2);
        }

        .nutrition-value {
            font-size: 1.8rem;
            font-weight: 800;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 8px;
        }

        .nutrition-label {
            font-size: 0.9rem;
            color: #666;
            font-weight: 500;
        }

        .info-list {
            list-style: none;
        }

        .info-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid #f0f0f0;
        }

        .info-label {
            font-weight: 600;
            color: #555;
        }

        .info-value {
            color: #333;
            font-weight: 500;
        }

        .confidence-meter {
            background: #f0f0f0;
            border-radius: 10px;
            height: 8px;
            overflow: hidden;
            margin-top: 10px;
        }

        .confidence-fill {
            height: 100%;
            background: linear-gradient(135deg, #00c851, #00ff70);
            border-radius: 10px;
            transition: width 1s ease;
        }

        .ai-insights {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 25px;
            border-radius: 16px;
            margin-top: 30px;
        }

        .insight-title {
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 10000;
        }

        .loading-screen.active {
            display: flex;
        }

        .loading-content {
            text-align: center;
            color: white;
        }

        .loading-spinner {
            width: 80px;
            height: 80px;
            border: 6px solid rgba(255, 255, 255, 0.2);
            border-top: 6px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 30px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .loading-text {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .loading-progress {
            width: 300px;
            height: 4px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 2px;
            overflow: hidden;
            margin: 20px auto;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(135deg, #667eea, #764ba2);
            width: 0%;
            border-radius: 2px;
            animation: progress 3s ease-in-out;
        }

        @keyframes progress {
            0% { width: 0%; }
            50% { width: 70%; }
            100% { width: 100%; }
        }

        .image-preview {
            max-width: 100%;
            max-height: 300px;
            border-radius: 12px;
            margin: 20px 0;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .alert-banner {
            padding: 20px;
            border-radius: 12px;
            margin: 20px 0;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .alert-success {
            background: linear-gradient(135deg, #00c851, #00ff70);
            color: white;
        }

        .alert-warning {
            background: linear-gradient(135deg, #ffbb33, #ff8800);
            color: white;
        }

        .alert-danger {
            background: linear-gradient(135deg, #ff4444, #cc0000);
            color: white;
        }

        .health-score {
            text-align: center;
            padding: 30px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 20px;
            color: white;
            margin: 20px 0;
        }

        .score-circle {
            width: 120px;
            height: 120px;
            border: 8px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            position: relative;
        }

        .score-value {
            font-size: 2.5rem;
            font-weight: 800;
        }

        /* Rest of original styles... */
        /* AI Assistant Chat */
        .ai-assistant {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
        }

        .ai-chat-button {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: pulse-button 2s infinite;
        }

        @keyframes pulse-button {
            0% { box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4); }
            50% { box-shadow: 0 8px 25px rgba(102, 126, 234, 0.7), 0 0 0 10px rgba(102, 126, 234, 0.1); }
            100% { box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4); }
        }

        .ai-chat-button:hover {
            transform: scale(1.1);
            box-shadow: 0 12px 35px rgba(102, 126, 234, 0.6);
        }

        .ai-chat-button.active {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            animation: none;
        }

        .ai-chat-window {
            position: absolute;
            bottom: 80px;
            right: 0;
            width: 420px;
            height: 650px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            display: none;
            flex-direction: column;
            overflow: hidden;
        }

        .ai-chat-window.show {
            display: flex;
            animation: slideUp 0.3s ease;
        }

        @keyframes slideUp {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .ai-chat-header {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 20px;
            text-align: center;
            position: relative;
        }

        .ai-chat-header h3 {
            margin: 0;
            font-size: 1.2rem;
        }

        .ai-chat-header p {
            margin: 5px 0 0 0;
            opacity: 0.9;
            font-size: 0.9rem;
        }

        .ai-status-indicator {
            position: absolute;
            top: 15px;
            right: 15px;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #27ae60;
            border: 2px solid white;
        }

        .ai-status-indicator.offline {
            background: #e74c3c;
        }

        .ai-chat-messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            background: #f8f9fa;
            max-height: 400px;
        }

        .ai-message, .user-message {
            margin-bottom: 15px;
            padding: 12px 16px;
            border-radius: 15px;
            max-width: 85%;
            word-wrap: break-word;
            line-height: 1.5;
            font-size: 14px;
        }

        .ai-message {
            background: linear-gradient(135deg, #e3f2fd, #bbdefb);
            color: #1565c0;
            margin-right: auto;
            border-bottom-left-radius: 5px;
        }

        .user-message {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            margin-left: auto;
            border-bottom-right-radius: 5px;
        }

        .ai-chat-input {
            display: flex;
            padding: 15px;
            border-top: 1px solid #e0e0e0;
            background: white;
            gap: 10px;
        }

        .ai-chat-input input {
            flex: 1;
            padding: 12px 15px;
            border: 1px solid #e0e0e0;
            border-radius: 25px;
            outline: none;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .ai-chat-input input:focus {
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .ai-chat-input button {
            padding: 12px 20px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .ai-chat-input button:hover {
            transform: translateY(-1px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        /* Original app styles */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            border-left: 6px solid;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.15);
        }

        .stat-card.urgent { border-left-color: #e74c3c; }
        .stat-card.warning { border-left-color: #f39c12; }
        .stat-card.good { border-left-color: #27ae60; }
        .stat-card.total { border-left-color: #3498db; }

        .stat-info h3 {
            font-size: 2.5rem;
            margin-bottom: 8px;
            font-weight: 700;
        }

        .stat-info p {
            color: #7f8c8d;
            font-size: 1rem;
            font-weight: 500;
        }

        .stat-icon {
            font-size: 3rem;
            opacity: 0.8;
        }

        .controls {
            background: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }

        .content-card {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }

        .btn {
            padding: 15px 25px;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            font-size: 15px;
            text-decoration: none;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
        }

        /* Responsive design */
        @media (max-width: 768px) {
            .nav-tabs {
                flex-direction: column;
                width: 100%;
                max-width: 400px;
            }
            
            .nav-tab {
                width: 100%;
                justify-content: center;
            }
            
            .input-grid {
                grid-template-columns: 1fr;
            }
            
            .product-details {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2.5rem;
            }
            
            .ai-chat-window {
                width: 95vw;
                height: 70vh;
                right: 2.5vw;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>FreshKeeper AI</h1>
            <p>Your Smart Food Management System with Enhanced AI Assistant</p>
        </div>

        <!-- Navigation Tabs -->
        <div class="nav-tabs">
            <button class="nav-tab active" data-tab="inventory">
                Smart Inventory
            </button>
            <button class="nav-tab" data-tab="recipes">
                AI Recipes
            </button>
            <button class="nav-tab" data-tab="notifications">
                Smart Alerts
            </button>
            <button class="nav-tab" data-tab="analytics">
                AI Analytics
            </button>
            <button class="nav-tab" data-tab="ai-recognition">
                Advanced AI Recognition
            </button>
        </div>

        <!-- Inventory Tab -->
        <div id="inventory" class="tab-content active">
            <!-- Stats Grid -->
            <div class="stats-grid">
                <div class="stat-card urgent">
                    <div class="stat-info">
                        <h3 id="urgentCount">0</h3>
                        <p>Expiring Soon</p>
                    </div>
                    <div class="stat-icon">⚠️</div>
                </div>
                <div class="stat-card warning">
                    <div class="stat-info">
                        <h3 id="warningCount">0</h3>
                        <p>Needs Attention</p>
                    </div>
                    <div class="stat-icon">🔔</div>
                </div>
                <div class="stat-card good">
                    <div class="stat-info">
                        <h3 id="goodCount">0</h3>
                        <p>Fresh Items</p>
                    </div>
                    <div class="stat-icon">✅</div>
                </div>
                <div class="stat-card total">
                    <div class="stat-info">
                        <h3 id="totalCount">0</h3>
                        <p>Total Items</p>
                    </div>
                    <div class="stat-icon">📦</div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls">
                <div style="display: flex; gap: 20px; align-items: center; flex-wrap: wrap; margin-bottom: 25px;">
                    <input type="text" id="searchInput" placeholder="Search items..." style="flex: 1; min-width: 250px; padding: 15px; border: 2px solid #e0e0e0; border-radius: 12px; font-size: 15px;">
                    <select id="categoryFilter" style="padding: 15px; border: 2px solid #e0e0e0; border-radius: 12px; font-size: 15px;">
                        <option value="all">All Items</option>
                        <option value="dairy">Dairy</option>
                        <option value="fruits">Fruits</option>
                        <option value="vegetables">Vegetables</option>
                        <option value="meat">Meat</option>
                        <option value="grains">Grains</option>
                        <option value="other">Other</option>
                    </select>
                    <button id="addItemBtn" class="btn btn-primary">
                        Add Item
                    </button>
                </div>
            </div>
        </div>

        <!-- Recipes Tab -->
        <div id="recipes" class="tab-content">
            <div class="content-card">
                <h3>AI Recipe Suggestions</h3>
                <p>Get personalized recipe recommendations based on your available ingredients! Use the AI Assistant to ask for specific recipes, cooking tips, or meal planning advice.</p>
                <div style="margin-top: 20px;">
                    <button class="btn btn-primary" onclick="openAIChat('recipe')">
                        Ask AI for Recipes
                    </button>
                </div>
            </div>
        </div>

        <!-- Notifications Tab -->
        <div id="notifications" class="tab-content">
            <div class="content-card">
                <h3>Smart Notification Settings</h3>
                <p>Configure your alert preferences for expiration dates, low stock warnings, and recipe suggestions.</p>
            </div>
        </div>

        <!-- Analytics Tab -->
        <div id="analytics" class="tab-content">
            <div class="content-card">
                <h3>Food Waste Analytics</h3>
                <p>Track your food consumption patterns and reduce waste with AI insights. Ask the AI Assistant for personalized analytics and recommendations!</p>
                <div style="margin-top: 20px;">
                    <button class="btn btn-primary" onclick="openAIChat('analytics')">
                        Get AI Analytics
                    </button>
                </div>
            </div>
        </div>

        <!-- Advanced AI Recognition Tab -->
        <div id="ai-recognition" class="tab-content">
            <div class="ai-recognition-container">
                <div style="text-align: center; margin-bottom: 40px;">
                    <h1 style="font-size: 3rem; font-weight: 800; background: linear-gradient(135deg, #667eea, #764ba2, #f093fb); -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin-bottom: 15px; letter-spacing: -1px;">Advanced AI Food Recognition System</h1>
                    <p style="font-size: 1.2rem; color: #666; font-weight: 300;">Powered by Machine Learning & Computer Vision</p>
                    <div class="ai-status">
                        <div class="pulse"></div>
                        <span>AI Assistant Online - 99.7% Accuracy</span>
                    </div>
                </div>

                <div class="input-grid">
                    <!-- Barcode Scanner Panel -->
                    <div class="input-panel">
                        <div class="panel-header">
                            <div class="panel-icon">📊</div>
                            <div>
                                <div class="panel-title">Smart Barcode Scanner</div>
                                <div class="panel-subtitle">Instant product identification from UPC/EAN codes</div>
                            </div>
                        </div>
                        <input type="text" id="barcodeInput" class="input-field" placeholder="Enter or scan barcode (e.g., 8901030875124)">
                        <button class="action-btn" onclick="analyzeBarcode()">Analyze Barcode</button>
                    </div>

                    <!-- Image Recognition Panel -->
                    <div class="input-panel">
                        <div class="panel-header">
                            <div class="panel-icon">📸</div>
                            <div>
                                <div class="panel-title">AI Vision Analysis</div>
                                <div class="panel-subtitle">Advanced computer vision for product recognition</div>
                            </div>
                        </div>
                        <div class="file-upload-area" onclick="document.getElementById('imageInput').click()">
                            <div class="upload-icon">📷</div>
                            <div><strong>Drop image here or click to upload</strong></div>
                            <div style="margin-top: 10px; color: #666;">Supports JPG, PNG, HEIC</div>
                        </div>
                        <input type="file" id="imageInput" style="display: none" accept="image/*" onchange="handleImageUpload(this)">
                        <img id="imagePreview" class="image-preview" style="display: none;">
                        <button class="action-btn" onclick="analyzeImage()" style="margin-top: 20px;">AI Analyze Image</button>
                    </div>

                    <!-- Text Analysis Panel -->
                    <div class="input-panel">
                        <div class="panel-header">
                            <div class="panel-icon">💭</div>
                            <div>
                                <div class="panel-title">Natural Language Processing</div>
                                <div class="panel-subtitle">Describe the product in natural language</div>
                            </div>
                        </div>
                        <textarea id="textInput" class="input-field" rows="4" placeholder="Describe the food product (e.g., 'Chocolate chip cookies, homemade style, contains nuts')"></textarea>
                        <button class="action-btn" onclick="analyzeText()">Process Description</button>
                    </div>
                </div>

                <!-- AI Analysis Results -->
                <div id="aiAnalysis" class="ai-analysis">
                    <div class="analysis-header">
                        <div class="analysis-icon">🎯</div>
                        <div>
                            <h2 id="productName">AI Analysis Results</h2>
                            <div id="confidenceScore">Confidence: 0%</div>
                            <div class="confidence-meter">
                                <div id="confidenceFill" class="confidence-fill" style="width: 0%"></div>
                            </div>
                        </div>
                    </div>

                    <div class="product-details" id="productDetails">
                        <!-- Dynamic content will be inserted here -->
                    </div>

                    <div id="aiInsights" class="ai-insights">
                        <div class="insight-title">
                            <span>🔮</span> AI Insights & Recommendations
                        </div>
                        <div id="insightContent"></div>
                    </div>

                    <!-- Integration Button -->
                    <div style="text-align: center; margin-top: 30px; padding-top: 30px; border-top: 2px solid #e8ecff;">
                        <button class="action-btn" onclick="addToInventory()" style="background: linear-gradient(135deg, #00c851, #00ff70); max-width: 300px;">
                            Add to FreshKeeper Inventory
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- AI Assistant -->
    <div class="ai-assistant">
        <button class="ai-chat-button" id="aiChatBtn">
            🤖
        </button>
        
        <div class="ai-chat-window" id="aiChatWindow">
            <div class="ai-chat-header">
                <div class="ai-status-indicator" id="aiStatus"></div>
                <h3>Enhanced FreshKeeper AI</h3>
                <p>Your comprehensive food & nutrition expert</p>
            </div>
            
            <div class="ai-chat-messages" id="aiMessages">
                <div class="ai-message">
                    Hi! I'm your enhanced FreshKeeper AI assistant! I can help you with recipes, nutritional information, food storage tips, meal planning, and analyze food products through the Advanced AI Recognition system.
                    <br><br>What would you like to know about food and nutrition today?
                </div>
            </div>
            
            <div class="ai-chat-input">
                <input type="text" id="aiChatInput" placeholder="Ask about recipes, nutrition, ingredients..." maxlength="500">
                <button id="aiSendBtn">Send</button>
            </div>
        </div>
    </div>

    <!-- Loading Screen -->
    <div id="loadingScreen" class="loading-screen">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <div class="loading-text" id="loadingText">Initializing AI Analysis...</div>
            <div class="loading-progress">
                <div class="progress-bar"></div>
            </div>
            <div style="opacity: 0.8; margin-top: 10px;" id="loadingSubtext">Processing with deep learning models</div>
        </div>
    </div>

    <script>
        // Advanced AI Food Database with comprehensive product information
        const advancedFoodDatabase = {
            '8901030875124': {
                name: 'Maggi 2-Minute Noodles Masala',
                brand: 'Nestlé India',
                category: 'Instant Noodles',
                subcategory: 'Asian Noodles',
                weight: '70g',
                servingSize: '1 pack (70g)',
                mfgDate: '2024-06-15',
                expiryDate: '2025-06-15',
                batchCode: 'MG240615001',
                factoryLocation: 'Moga, Punjab, India',
                barcode: '8901030875124',
                ingredients: ['Wheat Flour', 'Palm Oil', 'Salt', 'Sugar', 'Spices', 'Flavor Enhancer (E621)', 'Stabilizers', 'Antioxidants'],
                allergens: ['Gluten', 'May contain traces of Milk, Soy'],
                nutritionPer100g: {
                    calories: 450,
                    protein: 12.7,
                    carbs: 59.2,
                    fat: 16.6,
                    saturatedFat: 8.1,
                    transFat: 0.1,
                    fiber: 3.0,
                    sugar: 4.6,
                    sodium: 1400,
                    potassium: 220,
                    calcium: 80,
                    iron: 8.2,
                    vitaminA: 150,
                    vitaminC: 12
                },
                healthMetrics: {
                    healthScore: 6.2,
                    processingLevel: 'Ultra-processed',
                    additives: 8,
                    naturalIngredients: 40,
                    sugarContent: 'Moderate',
                    sodiumLevel: 'High',
                    fatQuality: 'Poor'
                },
                certifications: ['ISO 22000', 'HACCP', 'BIS'],
                countryOfOrigin: 'India',
                price: { currency: 'INR', value: 12, date: '2024-08-01' },
                availability: 'Widely Available',
                sustainability: {
                    packagingRecyclable: 60,
                    carbonFootprint: 'Medium',
                    waterUsage: 'High'
                }
            }
        };

        // AI-powered nutrition estimation
        const aiNutritionModel = {
            'instant noodles': {
                baseNutrition: { calories: 450, protein: 12, carbs: 60, fat: 16, fiber: 3, sugar: 5, sodium: 1200 },
                confidence: 0.92,
                healthScore: 5.8,
                processingLevel: 'Ultra-processed'
            },
            'cookies': {
                baseNutrition: { calories: 450, protein: 7, carbs: 65, fat: 18, fiber: 3, sugar: 25, sodium: 350 },
                confidence: 0.85,
                healthScore: 4.8,
                processingLevel: 'Processed'
            }
        };

        // Application state
        let foodItems = [];
        let currentAnalyzedProduct = null;

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
            setupDragAndDrop();
        });

        function initializeApp() {
            loadSampleData();
            setupEventListeners();
            updateStats();
        }

        function setupEventListeners() {
            // Tab navigation
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    switchTab(this.dataset.tab);
                });
            });

            // AI Assistant
            document.getElementById('aiChatBtn').addEventListener('click', toggleAIChat);
            document.getElementById('aiSendBtn').addEventListener('click', sendAIMessage);
            document.getElementById('aiChatInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    sendAIMessage();
                }
            });
        }

        function loadSampleData() {
            const sampleItems = [
                { id: 1, name: 'Milk', category: 'dairy', expiry: getDateString(2), quantity: 1, icon: '🥛' },
                { id: 2, name: 'Bananas', category: 'fruits', expiry: getDateString(5), quantity: 6, icon: '🍌' },
                { id: 3, name: 'Chicken Breast', category: 'meat', expiry: getDateString(1), quantity: 2, icon: '🍗' },
                { id: 4, name: 'Spinach', category: 'vegetables', expiry: getDateString(3), quantity: 1, icon: '🥬' }
            ];
            foodItems = sampleItems;
        }

        function getDateString(daysFromNow) {
            const date = new Date();
            date.setDate(date.getDate() + daysFromNow);
            return date.toISOString().split('T')[0];
        }

        function switchTab(tabId) {
            document.querySelectorAll('.nav-tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            
            document.querySelector(`[data-tab="${tabId}"]`).classList.add('active');
            document.getElementById(tabId).classList.add('active');
        }

        function updateStats() {
            const today = new Date();
            const urgentDate = new Date(today.getTime() + 2 * 24 * 60 * 60 * 1000);
            const warningDate = new Date(today.getTime() + 5 * 24 * 60 * 60 * 1000);

            let urgentCount = 0, warningCount = 0, goodCount = 0;

            foodItems.forEach(item => {
                const expiryDate = new Date(item.expiry);
                if (expiryDate <= urgentDate) urgentCount++;
                else if (expiryDate <= warningDate) warningCount++;
                else goodCount++;
            });

            document.getElementById('urgentCount').textContent = urgentCount;
            document.getElementById('warningCount').textContent = warningCount;
            document.getElementById('goodCount').textContent = goodCount;
            document.getElementById('totalCount').textContent = foodItems.length;
        }

        // AI Assistant Functions
        function toggleAIChat() {
            const chatWindow = document.getElementById('aiChatWindow');
            const chatButton = document.getElementById('aiChatBtn');
            
            if (chatWindow.classList.contains('show')) {
                chatWindow.classList.remove('show');
                chatButton.classList.remove('active');
            } else {
                chatWindow.classList.add('show');
                chatButton.classList.add('active');
                document.getElementById('aiChatInput').focus();
            }
        }

        function openAIChat(context) {
            const chatWindow = document.getElementById('aiChatWindow');
            const chatButton = document.getElementById('aiChatBtn');
            
            chatWindow.classList.add('show');
            chatButton.classList.add('active');
            
            const contextMessages = {
                recipe: "What detailed recipes can I make with my current ingredients?",
                analytics: "Can you analyze my food inventory and provide insights?"
            };
            
            if (contextMessages[context]) {
                setTimeout(() => {
                    document.getElementById('aiChatInput').value = contextMessages[context];
                    sendAIMessage();
                }, 500);
            }
        }

        function sendAIMessage() {
            const input = document.getElementById('aiChatInput');
            const message = input.value.trim();
            
            if (!message) return;
            
            addMessage(message, 'user');
            input.value = '';
            
            setTimeout(() => {
                const response = getAIResponse(message);
                addMessage(response, 'ai');
            }, 1000);
        }

        function getAIResponse(message) {
            const msg = message.toLowerCase();
            
            if (msg.includes('recipe') || msg.includes('cook')) {
                return "I can help you create recipes based on your inventory! Try using the Advanced AI Recognition system to analyze specific ingredients, then I can suggest detailed recipes with exact quantities and cooking instructions.";
            }
            
            if (msg.includes('nutrition') || msg.includes('analyze')) {
                return "For detailed nutritional analysis, use the Advanced AI Recognition tab! You can scan barcodes, upload food images, or describe products in natural language. I'll provide comprehensive nutrition facts, health scores, and personalized recommendations.";
            }
            
            return "I'm here to help with all your food and nutrition questions! Try the Advanced AI Recognition system for detailed product analysis, or ask me about recipes, storage tips, or meal planning.";
        }

        function addMessage(message, sender) {
            const messagesContainer = document.getElementById('aiMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = sender === 'user' ? 'user-message' : 'ai-message';
            messageDiv.innerHTML = message.replace(/\n/g, '<br>');
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        // Advanced AI Recognition Functions
        function showLoadingScreen(text = "Initializing AI Analysis...") {
            document.getElementById('loadingScreen').classList.add('active');
            document.getElementById('loadingText').textContent = text;
            
            setTimeout(() => {
                hideLoadingScreen();
            }, 3000);
        }

        function hideLoadingScreen() {
            document.getElementById('loadingScreen').classList.remove('active');
        }

        function analyzeBarcode() {
            const barcode = document.getElementById('barcodeInput').value.trim();
            if (!barcode) {
                alert('Please enter a barcode number');
                return;
            }

            showLoadingScreen("Scanning barcode database...");
            
            setTimeout(() => {
                if (advancedFoodDatabase[barcode]) {
                    displayAdvancedResults(advancedFoodDatabase[barcode], 0.98);
                } else {
                    const mockProduct = generateMockProduct(barcode);
                    displayAdvancedResults(mockProduct, 0.75);
                }
            }, 3000);
        }

        function handleImageUpload(input) {
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const preview = document.getElementById('imagePreview');
                    preview.src = e.target.result;
                    preview.style.display = 'block';
                };
                reader.readAsDataURL(input.files[0]);
            }
        }

        function analyzeImage() {
            const imageInput = document.getElementById('imageInput');
            if (!imageInput.files[0]) {
                alert('Please upload an image first');
                return;
            }

            showLoadingScreen("Analyzing image with computer vision...");
            
            setTimeout(() => {
                const aiResult = generateAIProduct('cookies');
                displayAdvancedResults(aiResult, 0.87);
            }, 3000);
        }

        function analyzeText() {
            const description = document.getElementById('textInput').value.trim().toLowerCase();
            if (!description) {
                alert('Please enter a product description');
                return;
            }

            showLoadingScreen("Processing natural language...");
            
            setTimeout(() => {
                const aiResult = processNaturalLanguage(description);
                displayAdvancedResults(aiResult, 0.82);
            }, 3000);
        }

        function generateAIProduct(productType) {
            const modelData = aiNutritionModel[productType] || aiNutritionModel['cookies'];
            
            return {
                name: `AI Identified: ${productType.charAt(0).toUpperCase() + productType.slice(1)}`,
                brand: 'Unknown Brand',
                category: 'Food Product',
                subcategory: productType,
                weight: '100g (estimated)',
                servingSize: '1 serving',
                ingredients: ['Identified through AI vision'],
                allergens: ['Check packaging for allergen information'],
                nutritionPer100g: modelData.baseNutrition,
                healthMetrics: {
                    healthScore: modelData.healthScore,
                    processingLevel: modelData.processingLevel,
                    additives: Math.floor(Math.random() * 10),
                    naturalIngredients: Math.floor(Math.random() * 80) + 20
                },
                aiGenerated: true,
                confidence: modelData.confidence
            };
        }

        function processNaturalLanguage(description) {
            let productType = 'cookies';
            let confidence = 0.70;
            
            for (let key in aiNutritionModel) {
                if (description.includes(key)) {
                    productType = key;
                    confidence = aiNutritionModel[key].confidence;
                    break;
                }
            }
            
            const modelData = aiNutritionModel[productType];
            
            return {
                name: `NLP Analysis: ${description.charAt(0).toUpperCase() + description.slice(1)}`,
                brand: 'User Described',
                category: 'Food Product',
                subcategory: productType,
                weight: 'Variable',
                description: description,
                ingredients: ['Natural Language Processing Analysis'],
                nutritionPer100g: modelData.baseNutrition,
                healthMetrics: {
                    healthScore: modelData.healthScore,
                    processingLevel: modelData.processingLevel,
                    additives: Math.floor(Math.random() * 8),
                    naturalIngredients: Math.floor(Math.random() * 60) + 20
                },
                aiGenerated: true,
                confidence: confidence
            };
        }

        function generateMockProduct(barcode) {
            return {
                name: 'Unknown Product',
                brand: 'Generic Foods',
                category: 'Packaged Food',
                barcode: barcode,
                weight: '100g',
                nutritionPer100g: {
                    calories: 200 + Math.floor(Math.random() * 300),
                    protein: Math.floor(Math.random() * 20),
                    carbs: Math.floor(Math.random() * 60),
                    fat: Math.floor(Math.random() * 25),
                    fiber: Math.floor(Math.random() * 10),
                    sugar: Math.floor(Math.random() * 30),
                    sodium: Math.floor(Math.random() * 800)
                },
                healthMetrics: {
                    healthScore: 4.0 + Math.random() * 4,
                    processingLevel: 'Unknown',
                    additives: Math.floor(Math.random() * 8),
                    naturalIngredients: Math.floor(Math.random() * 60) + 20
                },
                confidence: 0.75
            };
        }

        function displayAdvancedResults(productData, confidence) {
            currentAnalyzedProduct = productData;
            
            const analysisDiv = document.getElementById('aiAnalysis');
            const productName = document.getElementById('productName');
            const confidenceScore = document.getElementById('confidenceScore');
            const confidenceFill = document.getElementById('confidenceFill');
            const productDetails = document.getElementById('productDetails');
            const insightContent = document.getElementById('insightContent');

            // Update header
            productName.textContent = productData.name;
            const confidencePercent = Math.round(confidence * 100);
            confidenceScore.textContent = `Confidence: ${confidencePercent}%`;
            confidenceFill.style.width = `${confidencePercent}%`;

            // Generate detailed cards
            productDetails.innerHTML = `
                ${createProductInfoCard(productData)}
                ${createNutritionCard(productData.nutritionPer100g)}
                ${createHealthMetricsCard(productData.healthMetrics)}
            `;

            // Generate AI insights
            insightContent.innerHTML = generateAIInsights(productData);

            analysisDiv.classList.add('active');
            analysisDiv.scrollIntoView({ behavior: 'smooth' });
        }

        function createProductInfoCard(data) {
            return `
                <div class="detail-card">
                    <div class="card-title">Product Information</div>
                    <ul class="info-list">
                        <li class="info-item">
                            <span class="info-label">Brand:</span>
                            <span class="info-value">${data.brand}</span>
                        </li>
                        <li class="info-item">
                            <span class="info-label">Category:</span>
                            <span class="info-value">${data.category}</span>
                        </li>
                        <li class="info-item">
                            <span class="info-label">Weight/Volume:</span>
                            <span class="info-value">${data.weight}</span>
                        </li>
                        ${data.barcode ? `
                        <li class="info-item">
                            <span class="info-label">Barcode:</span>
                            <span class="info-value">${data.barcode}</span>
                        </li>` : ''}
                    </ul>
                </div>
            `;
        }

        function createNutritionCard(nutrition) {
            return `
                <div class="detail-card">
                    <div class="card-title">Nutritional Information (per 100g)</div>
                    <div class="nutrition-grid">
                        <div class="nutrition-item">
                            <div class="nutrition-value">${nutrition.calories}</div>
                            <div class="nutrition-label">Calories</div>
                        </div>
                        <div class="nutrition-item">
                            <div class="nutrition-value">${nutrition.protein}g</div>
                            <div class="nutrition-label">Protein</div>
                        </div>
                        <div class="nutrition-item">
                            <div class="nutrition-value">${nutrition.carbs}g</div>
                            <div class="nutrition-label">Carbs</div>
                        </div>
                        <div class="nutrition-item">
                            <div class="nutrition-value">${nutrition.fat}g</div>
                            <div class="nutrition-label">Total Fat</div>
                        </div>
                        <div class="nutrition-item">
                            <div class="nutrition-value">${nutrition.fiber}g</div>
                            <div class="nutrition-label">Fiber</div>
                        </div>
                        <div class="nutrition-item">
                            <div class="nutrition-value">${nutrition.sugar}g</div>
                            <div class="nutrition-label">Sugar</div>
                        </div>
                    </div>
                </div>
            `;
        }

        function createHealthMetricsCard(health) {
            const scoreColor = health.healthScore > 7 ? '#00c851' : health.healthScore > 5 ? '#ffbb33' : '#ff4444';
            
            return `
                <div class="detail-card">
                    <div class="card-title">Health Analysis</div>
                    <div class="health-score">
                        <div class="score-circle" style="border-color: ${scoreColor}">
                            <div class="score-value">${health.healthScore.toFixed(1)}</div>
                        </div>
                        <div style="font-size: 1.2rem; font-weight: 600;">Health Score</div>
                        <div style="opacity: 0.8;">out of 10.0</div>
                    </div>
                    <ul class="info-list">
                        <li class="info-item">
                            <span class="info-label">Processing Level:</span>
                            <span class="info-value">${health.processingLevel}</span>
                        </li>
                        <li class="info-item">
                            <span class="info-label">Natural Ingredients:</span>
                            <span class="info-value">${health.naturalIngredients}%</span>
                        </li>
                    </ul>
                </div>
            `;
        }

        function generateAIInsights(data) {
            const insights = [];
            const health = data.healthMetrics;
            
            if (health.healthScore > 8) {
                insights.push("This product has a high health score and is nutritionally beneficial.");
            } else if (health.healthScore > 6) {
                insights.push("This option has moderate nutritional value. Consider as part of a balanced diet.");
            } else {
                insights.push("Consider limiting consumption. Look for healthier alternatives when possible.");
            }
            
            insights.push("Try pairing with fresh fruits or vegetables for added nutrients.");
            
            return insights.map(insight => `<div style="margin: 15px 0; padding: 12px; background: rgba(255,255,255,0.2); border-radius: 8px;">${insight}</div>`).join('');
        }

        // Integration function to add analyzed product to inventory
        function addToInventory() {
            if (!currentAnalyzedProduct) {
                alert('Please analyze a product first');
                return;
            }

            const newItem = {
                id: Date.now(),
                name: currentAnalyzedProduct.name,
                category: 'other',
                expiry: getDateString(30),
                quantity: 1,
                icon: '📦'
            };

            foodItems.push(newItem);
            updateStats();
            
            alert(`${currentAnalyzedProduct.name} added to your FreshKeeper inventory!`);
            
            switchTab('inventory');
        }

        function setupDragAndDrop() {
            const uploadArea = document.querySelector('.file-upload-area');
            
            uploadArea.addEventListener('dragover', function(e) {
                e.preventDefault();
                this.classList.add('dragover');
            });
            
            uploadArea.addEventListener('dragleave', function() {
                this.classList.remove('dragover');
            });
            
            uploadArea.addEventListener('drop', function(e) {
                e.preventDefault();
                this.classList.remove('dragover');
                
                const files = e.dataTransfer.files;
                if (files.length > 0) {
                    const imageInput = document.getElementById('imageInput');
                    imageInput.files = files;
                    handleImageUpload(imageInput);
                }
            });
        }

        console.log('FreshKeeper AI System initialized successfully!');
    </script>
</body></option>
